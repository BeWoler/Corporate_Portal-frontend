(this["webpackJsonpcorporate-frontend"]=this["webpackJsonpcorporate-frontend"]||[]).push([[0],{109:function(e,t,r){},123:function(e,t,r){},132:function(e,t,r){},133:function(e,t,r){},134:function(e,t,r){},159:function(e,t,r){},165:function(e,t,r){},166:function(e,t,r){},167:function(e,t,r){},168:function(e,t,r){},170:function(e,t,r){},171:function(e,t,r){},172:function(e,t,r){},173:function(e,t,r){},174:function(e,t,r){},175:function(e,t,r){},196:function(e,t,r){},197:function(e,t,r){},198:function(e,t,r){},199:function(e,t,r){},200:function(e,t,r){},201:function(e,t,r){},202:function(e,t,r){},203:function(e,t,r){},204:function(e,t,r){},205:function(e,t,r){},206:function(e,t,r){},207:function(e,t,r){},208:function(e,t,r){},209:function(e,t,r){},215:function(e,t,r){},216:function(e,t,r){},217:function(e,t,r){},218:function(e,t,r){},219:function(e,t,r){},220:function(e,t,r){},221:function(e,t,r){"use strict";r.r(t),r.d(t,"Context",(function(){return Nt}));var n=r(1),s=r(12),a=r(49),c=r.n(a),i=r(22),o=r(19),l=r(79),u=r.n(l),d=r(268),j=(r(159),r(0)),b=function(){var e=Object(n.useContext)(Nt).store;return Object(j.jsx)("div",{className:"userBar__container",children:Object(j.jsxs)(s.b,{className:"userBar__user",to:"profile/".concat(e.user.id),children:[e.user.email,Object(j.jsx)(d.a,{src:e.user.avatar,className:"avatar",sx:{cursor:"pointer",width:"30px",height:"30px",marginLeft:"0.5rem",bgcolor:"#534ED9"}})]})})},h=r(95),f=r.n(h),m=r(94),x=r.n(m),p=r(96),O=r.n(p),_=r(90),v=r.n(_),g=r(93),k=r.n(g),N=r(92),w=r.n(N),C=r(91),y=r.n(C),U=(r(165),function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useRef)(null),r=Object(n.useRef)(null),a={color:"#534ED9",verticalAlign:"bottom",marginRight:".4rem"};if(!e.isAuth)return null;var c=function(){var e,n;return null===(e=r.current)||void 0===e||e.classList.replace("toggled","toggle"),null===(n=t.current)||void 0===n?void 0:n.classList.replace("opened","closed")};return Object(j.jsxs)("nav",{children:[Object(j.jsx)("span",{className:"mobile__burger toggle",onClick:function(){var e,n,s,a,c;return(null===(e=r.current)||void 0===e?void 0:e.classList.contains("toggle"))?(null===(n=r.current)||void 0===n||n.classList.replace("toggle","toggled"),null===(s=t.current)||void 0===s?void 0:s.classList.replace("closed","opened")):(null===(a=r.current)||void 0===a||a.classList.replace("toggled","toggle"),null===(c=t.current)||void 0===c?void 0:c.classList.replace("opened","closed"))},ref:r}),Object(j.jsxs)("ul",{className:"mobile__nav__ul closed",ref:t,children:[Object(j.jsxs)(s.b,{to:"profile/".concat(e.user.id),className:"mobile__nav__li",onClick:c,children:[Object(j.jsx)(v.a,{sx:a}),"My Profile"]}),Object(j.jsxs)(s.b,{to:"friends/".concat(e.user.id),className:"mobile__nav__li",onClick:c,children:[Object(j.jsx)(y.a,{sx:a}),"Friends"]}),Object(j.jsxs)(s.b,{to:"board",className:"mobile__nav__li",onClick:c,children:[Object(j.jsx)(w.a,{sx:a}),"Board"]}),Object(j.jsxs)(s.b,{to:"chat",className:"mobile__nav__li",onClick:c,children:[Object(j.jsx)(k.a,{sx:a}),"Messages"]}),Object(j.jsxs)(s.b,{to:"users",className:"mobile__nav__li",onClick:c,children:[Object(j.jsx)(x.a,{sx:a}),"Users"]}),Object(j.jsxs)(s.b,{to:"settings",className:"mobile__nav__li",onClick:c,children:[Object(j.jsx)(f.a,{sx:a}),"Settings"]}),Object(j.jsxs)(s.b,{to:"/login",className:"mobile__nav__li",onClick:function(){c(),e.logout()},children:[Object(j.jsx)(O.a,{sx:a}),"Logout"]})]})]})}),S=(r(166),function(){var e={color:"#534ED9",verticalAlign:"bottom",marginRight:".4rem",width:"1.8rem",height:"1.8rem"};return Object(n.useContext)(Nt).store.isAuth?Object(j.jsx)("header",{className:"header",children:Object(j.jsxs)("div",{className:"header__main",children:[Object(j.jsxs)("div",{className:"header__logo",children:[Object(j.jsx)(u.a,{sx:e}),Object(j.jsx)("p",{className:"header__title",children:Object(j.jsx)(s.b,{to:"/board",children:"Corporate Portal"})})]}),Object(j.jsx)(U,{}),Object(j.jsx)(b,{})]})}):Object(j.jsx)("header",{className:"header",children:Object(j.jsxs)("div",{className:"header__main nonAuth",children:[Object(j.jsxs)("div",{className:"header__logo",children:[Object(j.jsx)(u.a,{sx:e}),Object(j.jsx)("p",{className:"header__title",children:Object(j.jsx)(s.b,{to:"/",children:"Corporate Portal"})})]}),Object(j.jsxs)("div",{className:"header__signBtns",children:[Object(j.jsx)(s.b,{to:"login",children:"Sign In"}),Object(j.jsx)(s.b,{to:"registration",children:"Sign Up"})]})]})})}),D=(r(167),function(){var e=Object(n.useContext)(Nt).store,t={color:"#534ED9",verticalAlign:"bottom",marginRight:".4rem"};return e.isAuth?Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{className:"nav__ul",children:[Object(j.jsxs)(s.b,{to:"profile/".concat(e.user.id),className:"nav__li",children:[Object(j.jsx)(v.a,{sx:t}),"My Profile"]}),Object(j.jsxs)(s.b,{to:"friends/".concat(e.user.id),className:"nav__li",children:[Object(j.jsx)(y.a,{sx:t}),"Friends"]}),Object(j.jsxs)(s.b,{to:"board",className:"nav__li",children:[Object(j.jsx)(w.a,{sx:t}),"Board"]}),Object(j.jsxs)(s.b,{to:"chat",className:"nav__li",children:[Object(j.jsx)(k.a,{sx:t}),"Messages"]}),Object(j.jsxs)(s.b,{to:"users",className:"nav__li",children:[Object(j.jsx)(x.a,{sx:t}),"Users"]}),Object(j.jsxs)(s.b,{to:"settings",className:"nav__li",children:[Object(j.jsx)(f.a,{sx:t}),"Settings"]}),Object(j.jsxs)(s.b,{to:"/login",className:"nav__li",onClick:function(){e.logout()},children:[Object(j.jsx)(O.a,{sx:t}),"Logout"]})]})}):null}),E=(r(168),function(){return"/admin"===Object(o.g)().pathname?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(S,{}),Object(j.jsx)("div",{className:"admin__box__container",children:Object(j.jsx)("div",{className:"admin__box__outlet",children:Object(j.jsx)(o.b,{})})})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(S,{}),Object(j.jsxs)("div",{className:"main__box__container",children:[Object(j.jsx)(D,{}),Object(j.jsx)("div",{className:"main__box__outlet",children:Object(j.jsx)(o.b,{})})]})]})}),P=r(3),A=r.n(P),I=r(6),B=r(4),F=r(261),L=r(269),M=(r(170),function(){return Object(j.jsxs)("div",{className:"title",children:[Object(j.jsx)(u.a,{sx:{color:"#534ED9",marginRight:".6rem",width:"4rem",height:"4rem"}}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"title__title",children:"Corporate Portal"}),Object(j.jsx)("p",{className:"title__text",children:'This is your "virtual office" that allows you to share information, documents, add, change, delete, communicate with your colleagues'})]})]})}),R=(r(171),Object(i.a)((function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)(""),r=Object(B.a)(t,2),a=r[0],c=r[1],i=Object(n.useState)(""),o=Object(B.a)(i,2),l=o[0],u=o[1],d={margin:"1.5rem 1.3rem 0.8rem 1.3rem",":after":{borderBottom:"2px solid #534ED9"}};return Object(j.jsxs)("form",{className:"login__form",children:[Object(j.jsx)("div",{className:"title__box",children:Object(j.jsx)(M,{})}),Object(j.jsxs)("div",{className:"form__box",children:[Object(j.jsx)("h2",{className:"form__h2",children:"Login"}),Object(j.jsx)("p",{className:"error",children:e.error}),Object(j.jsx)(F.a,{placeholder:"Username",type:"text",sx:d,onChange:function(e){c(e.target.value)}}),Object(j.jsx)(F.a,{autoComplete:"on",placeholder:"Password",type:"password",sx:d,onChange:function(e){u(e.target.value)}}),Object(j.jsx)(L.a,{variant:"contained",sx:{margin:"2rem 1.3rem 2rem 1.3rem",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.login(a,l);case 2:e.checkAuth();case 3:case"end":return t.stop()}}),t)}))),children:"Sign In"}),Object(j.jsx)("div",{className:"form__linkBox",children:Object(j.jsx)(s.b,{to:"/registration",className:"signUp",children:"Sign Up"})})]})]})}))),z=function(){return Object(j.jsx)(R,{})},q=(r(172),Object(i.a)((function(){var e=Object(n.useState)(""),t=Object(B.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),i=Object(B.a)(c,2),o=i[0],l=i[1],u=Object(n.useState)(""),d=Object(B.a)(u,2),b=d[0],h=d[1],f=Object(n.useState)(""),m=Object(B.a)(f,2),x=m[0],p=m[1],O=Object(n.useState)(""),_=Object(B.a)(O,2),v=_[0],g=_[1],k=Object(n.useContext)(Nt).store,N={margin:"1.5rem 1.3rem 0.8rem 1.3rem",":after":{borderBottom:"2px solid #534ED9"}};return Object(j.jsxs)("form",{className:"registr__form",children:[Object(j.jsx)("div",{className:"title__box",children:Object(j.jsx)(M,{})}),Object(j.jsxs)("div",{className:"form__box",children:[Object(j.jsx)("h2",{className:"form__h2",children:"Join Us"}),Object(j.jsx)("p",{className:"error",children:k.error}),Object(j.jsx)(F.a,{placeholder:"Email",type:"text",sx:N,onChange:function(e){a(e.target.value)}}),Object(j.jsx)(F.a,{placeholder:"Username",type:"text",sx:N,onChange:function(e){l(e.target.value)}}),Object(j.jsx)(F.a,{placeholder:"First Name",type:"text",sx:N,onChange:function(e){p(e.target.value)}}),Object(j.jsx)(F.a,{placeholder:"Last Name",type:"text",sx:N,onChange:function(e){g(e.target.value)}}),Object(j.jsx)(F.a,{autoComplete:"on",placeholder:"Password",type:"password",sx:N,onChange:function(e){h(e.target.value)}}),Object(j.jsx)(L.a,{variant:"contained",sx:{margin:"2rem 1.3rem 2rem 1.3rem",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.registration(r,o,b,x,v);case 2:k.checkAuth();case 3:case"end":return e.stop()}}),e)}))),children:"Sign Up"}),Object(j.jsxs)("div",{className:"form__linkBox",children:[Object(j.jsx)("span",{children:"Have an account?"}),Object(j.jsx)(s.b,{to:"/login",className:"signIn",children:"Sign In"})]})]})]})}))),T=function(){return Object(j.jsx)(q,{})},Y=r(267),H=(r(123),Object(i.a)((function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)(),r=Object(B.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(),i=Object(B.a)(c,2),o=i[0],l=i[1],u=Object(n.useState)(),d=Object(B.a)(u,2),b=d[0],h=d[1],f=Object(n.useState)(),m=Object(B.a)(f,2),x=m[0],p=m[1],O=Object(n.useState)(),_=Object(B.a)(O,2),v=_[0],g=_[1],k=Object(n.useState)(),N=Object(B.a)(k,2),w=N[0],C=N[1],y=Object(n.useState)(),U=Object(B.a)(y,2),S=U[0],D=U[1],E=Object(n.useState)(),P=Object(B.a)(E,2),M=P[0],R=P[1],z=Object(n.useState)(),q=Object(B.a)(z,2),T=q[0],H=q[1],Q=Object(n.useState)(),W=Object(B.a)(Q,2),J=W[0],V=W[1],G=Object(n.useState)(e.user.messagesFromFriend),K=Object(B.a)(G,2),X=K[0],Z=K[1],$=Object(n.useState)(e.user.privatePage),ee=Object(B.a)($,2),te=ee[0],re=ee[1],ne=Object(n.useState)(),se=Object(B.a)(ne,2),ae=se[0],ce=se[1],ie={margin:"0 0 1rem 0",":after":{borderBottom:"2px solid #534ED9"}};return Object(j.jsxs)("form",{className:"settings__form",children:[Object(j.jsx)("h3",{className:"settings__notification",children:e.successMessage?e.successMessage:null}),Object(j.jsxs)("div",{className:"settings__data",children:[Object(j.jsxs)("div",{className:"settings__mainData",children:[Object(j.jsx)("h4",{className:"settings__title",children:"Edit personal info"}),Object(j.jsx)(F.a,{onChange:function(e){return a(e.target.value)},placeholder:"First Name",type:"text",sx:ie}),Object(j.jsx)(F.a,{onChange:function(e){return l(e.target.value)},placeholder:"Last Name",type:"text",sx:ie}),Object(j.jsx)(F.a,{onChange:function(e){return p(e.target.value)},placeholder:"City",type:"text",sx:ie}),Object(j.jsx)(F.a,{onChange:function(e){return h(e.target.value)},placeholder:"Age",type:"date",sx:ie}),Object(j.jsx)(F.a,{onChange:function(e){return V(+e.target.value)},placeholder:"Phone",type:"number",sx:ie}),Object(j.jsxs)("div",{children:[Object(j.jsx)(Y.a,{checked:te,name:"Private",inputProps:{"aria-label":"controlled"},onChange:function(e){return re(e.target.checked)}}),"Private Profile"]}),Object(j.jsxs)("div",{children:[Object(j.jsx)(Y.a,{checked:X,name:"PrivateMessage",inputProps:{"aria-label":"controlled"},onChange:function(e){return Z(e.target.checked)}}),"Messages Only From Friends"]})]}),Object(j.jsxs)("div",{className:"settings__otherData",children:[Object(j.jsx)("h4",{className:"settings__title",children:"Edit other info"}),Object(j.jsx)(F.a,{onChange:function(e){return g(e.target.value)},multiline:!0,placeholder:"Stack",type:"text",sx:ie}),Object(j.jsx)(F.a,{onChange:function(e){return C(e.target.value)},placeholder:"Position",type:"text",sx:ie}),Object(j.jsx)(F.a,{onChange:function(e){return D(e.target.value)},placeholder:"Department",type:"text",sx:ie}),Object(j.jsx)(F.a,{onChange:function(e){return R(e.target.value)},multiline:!0,placeholder:"Education",type:"text",sx:ie}),Object(j.jsx)(F.a,{onChange:function(e){return H(e.target.value)},placeholder:"Skype",type:"text",sx:ie}),Object(j.jsx)(F.a,{onChange:function(e){return ce(e.target.value)},placeholder:"Description",type:"text",multiline:!0,sx:ie})]})]}),Object(j.jsx)(L.a,{onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.editProfile(e.user.id,{firstName:s,lastName:o,city:x,birthday:b,stack:v,position:w,department:S,education:M,skype:T,phone:J,messagesFromFriend:X,privatePage:te,description:ae});case 2:e.checkAuth();case 3:case"end":return t.stop()}}),t)}))),variant:"contained",sx:{margin:"2rem auto 2rem auto",width:"fit-content",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},children:"Save Changes"})]})}))),Q=Object(i.a)((function(){var e=Object(n.useContext)(Nt).store;return Object(j.jsxs)("form",{className:"settings__btnForm",children:[Object(j.jsx)(s.b,{className:"settings__btn",to:"password",children:"Change Password"}),Object(j.jsx)(s.b,{className:"settings__btn",to:"avatar",children:"Change Avatar"}),Object(j.jsx)(s.b,{className:"settings__btn",to:"/login",onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete();case 2:return t.next=4,e.checkAuth();case 4:case"end":return t.stop()}}),t)}))),children:"Delete Profile"})]})})),W=(r(173),Object(i.a)((function(){return Object(j.jsxs)("div",{className:"settings__container",children:[Object(j.jsx)("h2",{className:"settings__title",children:"Editing Profile"}),Object(j.jsxs)("div",{className:"settings__box",children:[Object(j.jsx)(Q,{}),Object(j.jsx)("hr",{}),Object(j.jsx)(H,{})]})]})}))),J=(r(174),Object(i.a)((function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)(),r=Object(B.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(),i=Object(B.a)(c,2),o=i[0],l=i[1],u={margin:"1rem 1.3rem 2rem 1.3rem",width:"400px",":after":{borderBottom:"2px solid #534ED9"}};return Object(j.jsxs)("form",{className:"change__form",children:[Object(j.jsx)("h3",{className:"error",children:e.error}),Object(j.jsx)("h4",{children:"Enter your old password"}),Object(j.jsx)(F.a,{placeholder:"Old Password",required:!0,type:"password",sx:u,onChange:function(e){return a(e.target.value)}}),Object(j.jsx)("h4",{children:"Enter your new password"}),Object(j.jsx)(F.a,{placeholder:"New Password",required:!0,type:"password",sx:u,onChange:function(e){return l(e.target.value)}}),Object(j.jsx)(L.a,{variant:"contained",sx:{margin:"0 auto",width:"fit-content",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.changePass(e.user.id,o,s);case 2:e.error||e.logout();case 3:case"end":return t.stop()}}),t)}))),children:"Change Password"})]})}))),V=(r(175),function(){return Object(j.jsxs)("div",{className:"changePasswordPage__container",children:[Object(j.jsx)("h2",{className:"changePasswordPage__title",children:"Change Password"}),Object(j.jsx)(J,{})]})}),G=r(16),K=r(18),X=r(63),Z=r.n(X),$="http://localhost:3010/api",ee=Z.a.create({withCredentials:!0,baseURL:$}),te=Z.a.create({withCredentials:!0,baseURL:"http://localhost:3010/admin"});ee.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e})),ee.interceptors.response.use((function(e){return e}),function(){var e=Object(I.a)(A.a.mark((function e(t){var r,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,401!==t.response.status||!t.config||t.config._isRetry){e.next=14;break}return r._isRetry=!0,e.prev=3,e.next=6,Z.a.get("".concat($,"/refresh"),{withCredentials:!0});case 6:return n=e.sent,localStorage.setItem("token",n.data.accessToken),e.abrupt("return",ee.request(r));case 11:e.prev=11,e.t0=e.catch(3),console.log("Unauthorized");case 14:throw t;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()),te.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e})),te.interceptors.response.use((function(e){return e}),function(){var e=Object(I.a)(A.a.mark((function e(t){var r,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,401!==t.response.status||!t.config||t.config._isRetry){e.next=14;break}return r._isRetry=!0,e.prev=3,e.next=6,Z.a.get("".concat($,"/refresh"),{withCredentials:!0});case 6:return n=e.sent,localStorage.setItem("token",n.data.accessToken),e.abrupt("return",te.request(r));case 11:e.prev=11,e.t0=e.catch(3),console.log("Unauthorized");case 14:throw t;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}());var re=ee,ne=function(){function e(){Object(G.a)(this,e)}return Object(K.a)(e,null,[{key:"createPost",value:function(e,t,r){return re.post("/post",{userId:e,text:t,fileName:r})}},{key:"createComment",value:function(e,t,r){return re.post("/post/comment",{id:e,text:t,userId:r})}}]),e}();ne.delete=function(e){return re.post("/post/delete",{id:e})},ne.edit=function(e,t){return re.patch("/post/edit",{id:e,text:t})},ne.getUserPostByUsername=function(e){return re.get("/post/username/".concat(e))},ne.getUserPostByUserId=function(e){return re.get("/post/id/".concat(e))},ne.getAllPosts=function(e){return re.get("/post/all?limit="+e)},ne.like=function(e,t){return re.post("/like",{post:e,user:t})};var se=r(69),ae=r.n(se),ce=function(e){var t=e.createPost,r=Object(n.useContext)(Nt).store,s=Object(n.useState)(),a=Object(B.a)(s,2),c=a[0],i=a[1],o=Object(n.useState)(""),l=Object(B.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)(),h=Object(B.a)(b,2),f=h[0],m=h[1],x=function(){var e=Object(I.a)(A.a.mark((function e(t){var n,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),!f){e.next=14;break}return(n=new FormData).append("files",f),e.next=7,re.post("/post/upload",n,{headers:{"content-type":"multipart/form-data"}});case 7:return s=e.sent,e.next=10,ne.createPost(r.user.id,u,s.data.path);case 10:d(""),m(""),e.next=17;break;case 14:return e.next=16,ne.createPost(r.user.id,u,null);case 16:d("");case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(0),e.next=23,ne.createPost(r.user.id,u,null);case 23:d("");case 24:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),p=c;return p=c?Object(j.jsx)("div",{children:Object(j.jsx)("a",{href:c,download:!0,children:"image/jpeg"===(null===f||void 0===f?void 0:f.type)||"image/jpg"===(null===f||void 0===f?void 0:f.type)||"image/png"===(null===f||void 0===f?void 0:f.type)?Object(j.jsx)("img",{src:c,className:"file__preview",alt:f.name}):Object(j.jsxs)("div",{children:[Object(j.jsx)(ae.a,{sx:{color:"#534ED9",width:"30px",height:"30px",verticalAlign:"middle",margin:"1rem 0"}}),f.name]})})}):null,Object(j.jsxs)("form",{className:"posts__create",encType:"multipart/form-data",children:[Object(j.jsxs)("div",{className:"posts__create__inputs",children:[Object(j.jsx)(F.a,{name:"files",type:"file",sx:{margin:"0 0 1rem 0",width:"fit-content",":after":{borderBottom:"2px solid #534ED9"}},onChange:function(e){!function(e){var t=new FileReader,r=e.target.files[0];r?(t.onloadend=function(){i(t.result)},t.readAsDataURL(r),m(r)):(i(null),m(null))}(e)}}),f?p:null,Object(j.jsx)(F.a,{value:u,onChange:function(e){d(e.target.value)},type:"text",placeholder:"Tell us something",multiline:!0,sx:{margin:"0 0 1rem 0",":after":{borderBottom:"2px solid #534ED9"}}})]}),Object(j.jsx)("div",{className:"posts__create__btn",children:Object(j.jsx)(L.a,{disabled:""===u||null===f,onClick:function(){var e=Object(I.a)(A.a.mark((function e(r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,x(r);case 3:return e.next=5,t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),variant:"contained",sx:{backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},children:"Create Post"})})]})},ie=r(98),oe=r.n(ie),le=r(99),ue=r.n(le),de=r(45),je=r.n(de),be=function(e){var t=e.post,r={width:"45px",height:"45px",margin:"0 1rem .5rem 0",backgroundColor:"#BF3030"};return Object(j.jsx)(j.Fragment,{children:t.comments.length>0?t.comments.map((function(e){return Object(j.jsxs)("div",{className:"post__comment",children:[Object(j.jsxs)("div",{className:"comment__info",children:[Object(j.jsxs)("h5",{className:"comment__author",children:[Object(j.jsx)(s.b,{to:"/profile/".concat(e.user._id),children:Object(j.jsx)(d.a,{src:e.user.avatar,sx:r})}),e.user.firstName," ",e.user.lastName]}),Object(j.jsxs)("p",{className:"comment__time",children:[Object(j.jsx)(je.a,{className:"time",format:"DD.MM.YYYY",children:e.time}),Object(j.jsx)(je.a,{className:"time",format:"HH.mm",children:e.time})]})]}),Object(j.jsx)("p",{className:"comment__text",children:e.text})]},e._id)})):null})},he=function(e){var t=e.post,r=e.createComment,s=Object(n.useState)(""),a=Object(B.a)(s,2),c=a[0],i=a[1];return Object(j.jsxs)("form",{className:"comment__create__form",children:[Object(j.jsx)(L.a,{disabled:""===c,onClick:Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(c,t._id);case 2:return e.next=4,i("");case 4:case"end":return e.stop()}}),e)}))),variant:"contained",sx:{margin:"0 1rem 0 0",fontSize:".7rem",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},children:"Add"}),Object(j.jsx)(F.a,{value:c,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Comment",multiline:!0,sx:{margin:"0 0 1rem 0",width:"80%",":after":{borderBottom:"2px solid #534ED9"}}})]})},fe=function(e){var t=e.post,r=e.deletePost;return Object(j.jsx)(L.a,{onClick:function(){var e=Object(I.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,r(t._id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),variant:"contained",sx:{margin:"0 0 0 1rem",fontSize:".7rem",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},children:"Delete"})},me=function(e){var t=e.post,r=e.position,s=e.edit,a=e.editPost,c=Object(n.useState)(""),i=Object(B.a)(c,2),o=i[0],l=i[1];return Object(j.jsxs)("div",{className:"post__edit ".concat(s===r?"edit":""),children:[Object(j.jsx)(F.a,{value:o,onChange:function(e){l(e.target.value)},type:"text",placeholder:"Enter new data",multiline:!0,sx:{margin:"0 0 1rem 0",width:"100%",":after":{borderBottom:"2px solid #534ED9"}}}),Object(j.jsx)(L.a,{onClick:function(){var e=Object(I.a)(A.a.mark((function e(r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,a(t._id,o);case 3:return e.next=5,l("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),variant:"contained",sx:{margin:"0 1rem 0 1rem",fontSize:".7rem",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},children:"Save"})]})},xe=(r(196),function(e){var t=e.posts,r=e.addLike,s=e.addComment,a=e.deletePost,c=e.editPost,i=Object(n.useContext)(Nt).store,l=Object(o.g)(),u=Object(n.useState)(),d=Object(B.a)(u,2),b=d[0],h=d[1],f=Object(n.useState)(),m=Object(B.a)(f,2),x=m[0],p=m[1],O=l.pathname.split("/").reverse()[0];return Object(j.jsx)("div",{className:"userPosts__container",children:t.map((function(e,t){return Object(j.jsxs)("div",{className:"userPosts__post",children:[Object(j.jsxs)("div",{className:"post__info",children:[Object(j.jsxs)("h4",{className:"post__author",children:[e.user.firstName," ",e.user.lastName]}),Object(j.jsxs)("p",{className:"post__time",children:[Object(j.jsx)(je.a,{className:"time",format:"DD.MM.YYYY",children:e.time}),Object(j.jsx)(je.a,{className:"time",format:"HH.mm",children:e.time})]})]}),Object(j.jsx)("div",{className:"post__files",children:"jpg"===e.file.split(".").reverse()[0]||"png"===e.file.split(".").reverse()[0]||"jpeg"===e.file.split(".").reverse()[0]?Object(j.jsx)("a",{href:e.file,download:!0,target:"__blank",children:Object(j.jsx)("img",{src:e.file,className:"file__preview",alt:"preview"})}):"null"!==e.file.split("/").reverse()[0]?Object(j.jsxs)("a",{href:e.file,download:!0,target:"__blank",children:[Object(j.jsx)(ae.a,{sx:{color:"#534ED9",width:"30px",height:"30px",verticalAlign:"middle",margin:"1rem 0"}}),e.file.split("-").reverse()[0]]}):null}),Object(j.jsx)("p",{className:"post__text",children:e.text}),Object(j.jsxs)("div",{className:"post__functions",children:[Object(j.jsxs)("div",{className:"post__likes",children:[Object(j.jsx)(oe.a,{onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(e._id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),color:e.likes.includes(i.user.id)?"error":"action",sx:{verticalAlign:"middle",margin:"0 .2rem 0 0",transition:"all ease .2s",":hover":{transform:"scale(1.2)"}}}),Object(j.jsx)("span",{children:e.likes.includes(i.user.id)?"liked":null}),Object(j.jsx)(ue.a,{onClick:function(){return b!==t?h(t):-1},sx:{color:"#BF3030",verticalAlign:"middle",margin:"0 .2rem 0 0",transition:"all ease .2s",":hover":{transform:"scale(1.2)"}}})]}),Object(j.jsxs)("div",{className:"post__btns",children:[i.user.id===O?Object(j.jsx)(L.a,{onClick:function(e){return e.preventDefault(),x!==t?p(t):-1},variant:"contained",sx:{margin:"0 0 0 1rem",fontSize:".7rem",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},children:"Edit"}):null,i.user.id===O?Object(j.jsx)(fe,{post:e,deletePost:a}):null]})]}),Object(j.jsx)("hr",{className:"post__hr"}),i.user.id===O?Object(j.jsx)(me,{post:e,position:t,editPost:c,edit:x}):null,Object(j.jsx)("div",{className:"post__comment__container ".concat(b===t?"open":""),children:Object(j.jsxs)("div",{className:"post__comment__create",children:[Object(j.jsx)(he,{post:e,createComment:s}),Object(j.jsx)(be,{post:e})]})})]},e._id)}))})}),pe=function(){var e=Object(n.useContext)(Nt).store,t=Object(o.g)(),r=Object(n.useState)([]),s=Object(B.a)(r,2),a=s[0],c=s[1],i=t.pathname.split("/").reverse()[0],l=function(){var e=Object(I.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.getUserPostByUserId(i);case 2:t=e.sent,c(t.data.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var t=Object(I.a)(A.a.mark((function t(r){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.like(r,e.user.id);case 2:l();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(I.a)(A.a.mark((function t(r,n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.createComment(n,r,e.user.id);case 2:l();case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),b=function(){var e=Object(I.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.delete(t);case 2:l();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(I.a)(A.a.mark((function e(t,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.edit(t,r);case 2:l();case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return ne.getUserPostByUserId(i).then((function(e){return c(e.data.reverse())})),function(){c([])}}),[i]),Object(j.jsxs)("div",{className:"profile__posts",children:[e.user.id===i?Object(j.jsx)(ce,{createPost:l}):null,Object(j.jsx)(xe,{posts:a,addLike:u,addComment:d,deletePost:b,editPost:h})]})},Oe=(r(197),function(e){var t=e.friends,r=Object(n.useContext)(Nt).store,a={width:"50px",height:"50px",bgcolor:"#534ED9",overflow:"hidden"};return Object(j.jsxs)("div",{className:"userFriends__container",children:[Object(j.jsxs)("h3",{className:"userFriends__title",children:["Friends ",Object(j.jsx)("span",{children:t.length})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"userFriends__list",children:t.map((function(e){return Object(j.jsxs)(s.b,{className:"userFriends__link",to:"/profile/".concat(e._id),onClick:function(){return r.checkAuth()},children:[Object(j.jsx)(d.a,{src:e.avatar,sx:a}),e.firstName]},e._id)}))})]})}),_e=(r(73),r(132),Object(i.a)((function(){var e=Object(n.useContext)(Nt).store,t=e.user.avatar,r={width:"235px",height:"235px",borderRadius:".2rem",margin:"0 auto 1.5rem auto",backgroundColor:"#534ED9",boxShadow:"0px 1px 10px #3d3d3d",fontSize:"50px"};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"profile__container",children:[Object(j.jsxs)("div",{className:"profile__first__column",children:[Object(j.jsx)(d.a,{variant:"square",src:t,sx:r,children:e.user.firstName}),Object(j.jsxs)("ul",{className:"profile__info",children:[""!==e.user.city?Object(j.jsxs)("li",{className:"profile__info__list",children:["City: ",e.user.city]}):null,e.user.birthday?Object(j.jsxs)("li",{className:"profile__info__list",children:["My Birthday:"," ",e.user.birthday.split("-").reverse().join(".")]}):null,""!==e.user.stack?Object(j.jsxs)("li",{className:"profile__info__list",children:["Stack: ",e.user.stack]}):null,""!==e.user.position?Object(j.jsxs)("li",{className:"profile__info__list",children:["Position: ",e.user.position]}):null,""!==e.user.department?Object(j.jsxs)("li",{className:"profile__info__list",children:["Department: ",e.user.department]}):null,""!==e.user.education?Object(j.jsxs)("li",{className:"profile__info__list",children:["Education: ",e.user.education]}):null,""!==e.user.skype?Object(j.jsxs)("li",{className:"profile__info__list",children:["Skype: ",e.user.skype]}):null,e.user.phone?Object(j.jsxs)("li",{className:"profile__info__list",children:["Phone: ",e.user.phone]}):null]}),Object(j.jsx)(Oe,{friends:e.user.friends})]}),Object(j.jsxs)("div",{className:"profile__second__column",children:[Object(j.jsx)("p",{className:"profile__name",children:e.user.firstName&&e.user.lastName?"".concat(e.user.firstName," ").concat(e.user.lastName):"I don't have a name"}),Object(j.jsx)("p",{className:"profile__about",children:""!==e.user.description?"About me: ".concat(e.user.description):"Nothing at now..."}),Object(j.jsx)(pe,{})]})]}),Object(j.jsx)("div",{className:"mobile__profile__container",children:Object(j.jsxs)("div",{className:"mobile__profile__column",children:[Object(j.jsx)(d.a,{variant:"square",src:t,sx:r,children:e.user.firstName}),Object(j.jsx)("p",{className:"mobile__profile__name",children:e.user.firstName&&e.user.lastName?"".concat(e.user.firstName," ").concat(e.user.lastName):"I don't have a name"}),Object(j.jsxs)("ul",{className:"mobile__profile__info",children:[""!==e.user.city?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["City: ",e.user.city]}):null,e.user.birthday?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["My Birthday:"," ",e.user.birthday.split("-").reverse().join(".")]}):null,""!==e.user.stack?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Stack: ",e.user.stack]}):null,""!==e.user.position?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Position: ",e.user.position]}):null,""!==e.user.department?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Department: ",e.user.department]}):null,""!==e.user.education?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Education: ",e.user.education]}):null,""!==e.user.skype?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Skype: ",e.user.skype]}):null,e.user.phone?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Phone: ",e.user.phone]}):null]}),Object(j.jsx)("p",{className:"mobile__profile__about",children:""!==e.user.description?"About me: ".concat(e.user.description):"Nothing at now..."}),Object(j.jsx)(Oe,{friends:e.user.friends}),Object(j.jsx)(pe,{})]})})]})}))),ve=function(){function e(){Object(G.a)(this,e)}return Object(K.a)(e,null,[{key:"request",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/friend/request",{receiverId:t,senderId:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"accept",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/friend/accept",{receiverId:t,senderId:r,requestId:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"decline",value:function(){var e=Object(I.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/friend/decline",{requestId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/friend/delete",{userId:t,friendId:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRequests",value:function(){var e=Object(I.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.get("/friend/requests/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ge=function(e){var t=e.disabled,r=Object(n.useContext)(Nt).store,s=Object(o.h)(),a=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.request(r.otherUser.id,r.user.id);case 2:s("/friends/".concat(r.user.id));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)(L.a,{disabled:t,variant:"contained",sx:{margin:"0 0 1.5rem 0",width:"100%",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:a,children:"Add Friend"})},ke=r(43),Ne=function e(){Object(G.a)(this,e)};Ne.fetchUsers=function(e,t){return re.get("/users?limit="+t,{params:Object(ke.a)({},e)})},Ne.blockUser=function(e,t){return re.post("/user/block",{userId:e,blockedUserId:t})},Ne.unblockUser=function(e,t){return re.post("/user/unblock",{userId:e,blockedUserId:t})},Ne.getUserInfo=function(e){return re.get("/profile/".concat(e))},Ne.getUserPost=function(e){return re.get("/profile/posts/".concat(e))};var we=Object(i.a)((function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)(!1),r=Object(B.a)(t,2),s=r[0],a=r[1];Object(n.useEffect)((function(){var t;return(null===(t=e.user.blockedUser)||void 0===t?void 0:t.includes(e.otherUser.id))?(a(!0),function(){return a(!1)}):function(){return a(!1)}}),[e.otherUser.id,e.user.blockedUser]);var c={width:"fit-content",height:"fit-content",margin:"0",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}};return Object(j.jsxs)("div",{className:"profile__container",children:[Object(j.jsx)("div",{className:"profile__first__column",children:Object(j.jsx)(d.a,{variant:"square",src:e.otherUser.avatar,sx:{width:"235px",height:"235px",borderRadius:".2rem",margin:"0 auto 1.5rem auto",backgroundColor:"#534ED9",boxShadow:"0px 1px 10px #3d3d3d",fontSize:"50px"},children:e.otherUser.firstName})}),Object(j.jsxs)("div",{className:"profile__second__column",children:[Object(j.jsxs)("p",{className:"profile__name",children:[Object(j.jsx)("span",{children:e.otherUser.firstName&&e.otherUser.lastName?"".concat(e.otherUser.firstName," ").concat(e.otherUser.lastName):"I don't have a name"}),s?Object(j.jsx)(L.a,{sx:c,variant:"contained",onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne.unblockUser(e.user.id,e.otherUser.id);case 2:return t.next=4,e.checkAuth();case 4:case"end":return t.stop()}}),t)}))),children:"Unblock User"}):Object(j.jsx)(L.a,{sx:c,variant:"contained",onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne.blockUser(e.user.id,e.otherUser.id);case 2:return t.next=4,e.checkAuth();case 4:case"end":return t.stop()}}),t)}))),children:"Block User"})]}),Object(j.jsx)("div",{className:"profile__private",children:"This profile is hidden from others"})]})]})})),Ce=function e(){Object(G.a)(this,e)};Ce.conversation=function(e,t){return re.post("/messenger/conversation",{senderId:e,receiverId:t})},Ce.delete=function(e){return re.post("/messenger/delete",{conversationId:e})},Ce.getConversation=function(e){return re.get("/messenger/".concat(e))};var ye=function(){var e=Object(o.h)(),t=Object(n.useContext)(Nt).store,r=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce.conversation(t.user.id,t.otherUser.id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)(L.a,{variant:"contained",sx:{width:"100%",margin:"0 0 1.5rem 0",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:Object(I.a)(A.a.mark((function n(){return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r();case 2:e("/friends/".concat(t.user.id));case 3:case"end":return n.stop()}}),n)}))),children:"Send Message"})},Ue=Object(i.a)((function(){var e=Object(n.useContext)(Nt).store,t=Object(o.g)(),r=Object(n.useState)(!1),s=Object(B.a)(r,2),a=s[0],c=s[1],i=Object(n.useState)(!1),l=Object(B.a)(i,2),u=l[0],b=l[1],h=e.otherUser.avatar,f=t.pathname.split("/").reverse()[0],m=e.otherUser.blockedUser,x={width:"235px",height:"235px",borderRadius:".2rem",margin:"0 auto 1.5rem auto",backgroundColor:"#534ED9",boxShadow:"0px 1px 10px #3d3d3d",fontSize:"50px"},p={width:"fit-content",height:"fit-content",margin:"0",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}};return Object(n.useEffect)((function(){e.user.friends&&e.user.friends.forEach((function(e){e._id===f&&c(!0)}))}),[f,e.user.friends]),Object(n.useEffect)((function(){var t;return(null===(t=e.user.blockedUser)||void 0===t?void 0:t.includes(e.otherUser.id))?(b(!0),function(){return b(!1)}):function(){return b(!1)}}),[e.otherUser.id,e.user.blockedUser]),e.otherUser.privatePage||m&&m.includes(e.user.id)?Object(j.jsx)(we,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"profile__container",children:[Object(j.jsxs)("div",{className:"profile__first__column",children:[Object(j.jsx)(d.a,{variant:"square",src:h,sx:x,children:e.otherUser.firstName}),a?Object(j.jsx)(ge,{disabled:!0}):Object(j.jsx)(ge,{disabled:!1}),Object(j.jsx)(ye,{}),Object(j.jsxs)("ul",{className:"profile__info",children:[e.otherUser.birthday?Object(j.jsxs)("li",{className:"profile__info__list",children:["My Birthday:"," ",e.otherUser.birthday.split("-").reverse().join(".")]}):null,""!==e.otherUser.stack?Object(j.jsxs)("li",{className:"profile__info__list",children:["Stack: ",e.otherUser.stack]}):null,""!==e.otherUser.position?Object(j.jsxs)("li",{className:"profile__info__list",children:["Position: ",e.otherUser.position]}):null,""!==e.otherUser.department?Object(j.jsxs)("li",{className:"profile__info__list",children:["Department: ",e.otherUser.department]}):null,""!==e.otherUser.education?Object(j.jsxs)("li",{className:"profile__info__list",children:["Education: ",e.otherUser.education]}):null,""!==e.otherUser.skype?Object(j.jsxs)("li",{className:"profile__info__list",children:["Skype: ",e.otherUser.skype]}):null,e.otherUser.phone?Object(j.jsxs)("li",{className:"profile__info__list",children:["Phone: ",e.otherUser.phone]}):null]}),e.otherUser.friends?Object(j.jsx)(Oe,{friends:e.otherUser.friends}):null]}),Object(j.jsxs)("div",{className:"profile__second__column",children:[Object(j.jsxs)("p",{className:"profile__name",children:[Object(j.jsx)("span",{children:e.otherUser.firstName&&e.otherUser.lastName?"".concat(e.otherUser.firstName," ").concat(e.otherUser.lastName):"I don't have a name"}),u?Object(j.jsx)(L.a,{sx:p,variant:"contained",onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne.unblockUser(e.user.id,e.otherUser.id);case 2:return t.next=4,e.checkAuth();case 4:case"end":return t.stop()}}),t)}))),children:"Unblock User"}):Object(j.jsx)(L.a,{sx:p,variant:"contained",onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne.blockUser(e.user.id,e.otherUser.id);case 2:return t.next=4,e.checkAuth();case 4:case"end":return t.stop()}}),t)}))),children:"Block User"})]}),Object(j.jsx)("p",{className:"profile__about",children:e.otherUser.description?"About me: ".concat(e.otherUser.description):"Nothing at now..."}),Object(j.jsx)(pe,{})]})]}),Object(j.jsx)("div",{className:"mobile__profile__container",children:Object(j.jsxs)("div",{className:"mobile__profile__column",children:[Object(j.jsx)(d.a,{variant:"square",src:h,sx:x,children:e.otherUser.firstName}),Object(j.jsx)("p",{className:"mobile__profile__name",children:e.otherUser.firstName&&e.otherUser.lastName?"".concat(e.otherUser.firstName," ").concat(e.otherUser.lastName):"I don't have a name"}),a?Object(j.jsx)(ge,{disabled:!0}):Object(j.jsx)(ge,{disabled:!1}),Object(j.jsx)(ye,{}),u?Object(j.jsx)(L.a,{sx:p,variant:"contained",onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne.unblockUser(e.user.id,e.otherUser.id);case 2:return t.next=4,e.checkAuth();case 4:case"end":return t.stop()}}),t)}))),children:"Unblock User"}):Object(j.jsx)(L.a,{sx:p,variant:"contained",onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne.blockUser(e.user.id,e.otherUser.id);case 2:return t.next=4,e.checkAuth();case 4:case"end":return t.stop()}}),t)}))),children:"Block User"}),Object(j.jsxs)("ul",{className:"mobile__profile__info",children:[""!==e.otherUser.city?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["City: ",e.otherUser.city]}):null,e.otherUser.birthday?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["My Birthday:"," ",e.otherUser.birthday.split("-").reverse().join(".")]}):null,""!==e.otherUser.stack?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Stack: ",e.otherUser.stack]}):null,""!==e.otherUser.position?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Position: ",e.otherUser.position]}):null,""!==e.otherUser.department?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Department: ",e.otherUser.department]}):null,""!==e.otherUser.education?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Education: ",e.otherUser.education]}):null,""!==e.otherUser.skype?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Skype: ",e.otherUser.skype]}):null,e.otherUser.phone?Object(j.jsxs)("li",{className:"mobile__profile__info__list",children:["Phone: ",e.otherUser.phone]}):null]}),Object(j.jsx)("p",{className:"mobile__profile__about",children:""!==e.otherUser.description?"About me: ".concat(e.otherUser.description):"Nothing at now..."}),e.otherUser.friends?Object(j.jsx)(Oe,{friends:e.otherUser.friends}):null,Object(j.jsx)(pe,{})]})})]})})),Se=Object(i.a)((function(){var e=Object(n.useContext)(Nt).store,t=Object(o.g)().pathname.split("/").reverse()[0],r=e.user.id;return Object(n.useEffect)((function(){return r!==t?(e.getOtherUser(t),function(){return null}):function(){return null}}),[t,e,r]),r===t?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(_e,{})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(Ue,{})})})),De=(r(198),function(e){var t=e.fetchMore;return Object(j.jsx)(L.a,{sx:{width:"fit-content",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},variant:"contained",onClick:t,children:"Show More"})}),Ee=function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)([]),r=Object(B.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(),i=Object(B.a)(c,2),o=i[0],l=i[1],u=Object(n.useState)(10),d=Object(B.a)(u,2),b=d[0],h=d[1],f=Object(n.useState)(0),m=Object(B.a)(f,2),x=m[0],p=m[1],O=function(){var e=Object(I.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.getAllPosts(t).then((function(e){a(e.data.posts.reverse()),p(e.data.length)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return O(b),function(){a([])}}),[b]);var _=function(){var t=Object(I.a)(A.a.mark((function t(r){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.like(r,e.user.id);case 2:O(b);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(I.a)(A.a.mark((function t(r,n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.createComment(n,r,e.user.id);case 2:O(b);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"board",children:[Object(j.jsx)("div",{className:"board__posts__box",children:s.length>0?s.map((function(t,r){return Object(j.jsxs)("div",{className:"board__post",children:[Object(j.jsxs)("div",{className:"board__info",children:[Object(j.jsxs)("h4",{className:"board__author",children:[t.user.firstName," ",t.user.lastName]}),Object(j.jsxs)("p",{className:"board__time",children:[Object(j.jsx)(je.a,{className:"time",format:"DD.MM.YYYY",children:t.time}),Object(j.jsx)(je.a,{className:"time",format:"HH.mm",children:t.time})]})]}),"jpg"===t.file.split(".").reverse()[0]||"png"===t.file.split(".").reverse()[0]||"jpeg"===t.file.split(".").reverse()[0]?Object(j.jsx)("a",{href:t.file,download:!0,target:"__blank",children:Object(j.jsx)("img",{src:t.file,className:"file__preview",alt:"preview"})}):"null"!==t.file.split("/").reverse()[0]?Object(j.jsxs)("a",{href:t.file,download:!0,target:"__blank",children:[Object(j.jsx)(ae.a,{sx:{color:"#534ED9",width:"30px",height:"30px",verticalAlign:"middle",margin:"1rem 0"}}),t.file.split("-").reverse()[0]]}):null,Object(j.jsx)("p",{className:"board__text",children:t.text}),Object(j.jsxs)("div",{className:"board__likes",children:[Object(j.jsx)(oe.a,{onClick:Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t._id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),color:t.likes.includes(e.user.id)?"error":"action",sx:{verticalAlign:"middle",margin:"0 .2rem 0 0",transition:"all ease .2s",":hover":{transform:"scale(1.2)"}}}),Object(j.jsx)("span",{children:t.likes.includes(e.user.id)?"liked":null}),Object(j.jsx)(ue.a,{onClick:function(){return o!==r?l(r):-1},sx:{color:"#BF3030",verticalAlign:"middle",margin:"0 .2rem 0 0",transition:"all ease .2s",":hover":{transform:"scale(1.2)"}}})]}),Object(j.jsx)("hr",{className:"post__hr"}),Object(j.jsx)("div",{className:"post__comment__container ".concat(o===r?"open":""),children:Object(j.jsxs)("div",{className:"post__comment__create",children:[Object(j.jsx)(he,{post:t,createComment:v}),Object(j.jsx)(be,{post:t})]})})]},t._id)})):null}),(null===s||void 0===s?void 0:s.length)>=x?null:Object(j.jsx)(De,{fetchMore:function(){return h(b+10)}})]})},Pe=(r(199),function(){return Object(j.jsxs)("div",{className:"board__container",children:[Object(j.jsx)("h2",{className:"board__title",children:"Board"}),Object(j.jsx)("div",{className:"board__box",children:Object(j.jsx)(Ee,{})})]})}),Ae=function(e){var t=e.friendId,r=Object(n.useContext)(Nt).store,s=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.delete(r.user.id,t);case 2:r.checkAuth();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)(L.a,{sx:{margin:"0 0 0 2rem",width:"fit-content",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},variant:"contained",onClick:s,children:"Delete"})},Ie=(r(200),function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)([]),r=Object(B.a)(t,2),a=r[0],c=r[1];Object(n.useEffect)((function(){return c(e.user.friends),function(){return c(null)}}),[e.user.friends]);var i={width:"100px",height:"100px",margin:"0 .8rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"};return Object(j.jsx)("ul",{className:"friends__list",children:a.length>0?a.map((function(e){return Object(j.jsxs)("li",{className:"users__friends",children:[Object(j.jsxs)("div",{className:"users__data",children:[Object(j.jsx)(s.b,{to:"/profile/".concat(e._id),children:Object(j.jsx)(d.a,{src:e.avatar,sx:i})}),Object(j.jsxs)("ul",{className:"users__data__ul",children:[Object(j.jsx)("li",{className:"users__data__li",children:e.firstName&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):null}),Object(j.jsx)("li",{className:"friend__data__li",children:e.email?"Email: ".concat(e.email):null}),Object(j.jsx)("li",{className:"friend__data__li",children:e.city?"City: ".concat(e.city):null}),Object(j.jsx)("li",{className:"friend__data__li",children:e.birthday?"Birthday: ".concat(e.birthday.split("-").reverse().join(".")):null})]})]}),Object(j.jsx)(Ae,{friendId:e._id})]},e._id)})):Object(j.jsx)("h3",{className:"empty__page",children:"No friends yet"})})}),Be=(r(201),function(){var e=Object(n.useContext)(Nt).store,t=Object(o.g)(),r=Object(n.useState)([]),s=Object(B.a)(r,2),a=s[0],c=s[1],i=t.pathname.split("/").reverse()[0],l=function(){var e=Object(I.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.getRequests(i);case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var t=Object(I.a)(A.a.mark((function t(r,n,s){var a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ve.accept(r,n,s);case 2:return a=t.sent,e.checkAuth(),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),d=function(){var e=Object(I.a)(A.a.mark((function e(t){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.decline(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return ve.getRequests(i).then((function(e){return c(e.data)})),function(){return c(null)}}),[i]);var b={margin:"1rem .5rem 0 .5rem",width:"fit-content",height:"fit-content",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}};return Object(j.jsxs)("div",{className:"friends__requests",children:[(null===a||void 0===a?void 0:a.length)>0?Object(j.jsx)("hr",{}):null,Object(j.jsx)("div",{className:"friends__requests__box",children:(null===a||void 0===a?void 0:a.length)>0?a.map((function(e){return Object(j.jsxs)("div",{className:"requests",children:[e.sender.firstName," ",e.sender.lastName," wants to add you as a friend",Object(j.jsxs)("div",{children:[Object(j.jsx)(L.a,{variant:"contained",sx:b,onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e.receiver,e.sender._id,e._id);case 2:l();case 3:case"end":return t.stop()}}),t)}))),children:"Accept"}),Object(j.jsx)(L.a,{variant:"contained",sx:b,onClick:Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e._id);case 2:l();case 3:case"end":return t.stop()}}),t)}))),children:"Decline"})]})]},e._id)})):null})]})}),Fe=(r(202),function(){return Object(j.jsxs)("div",{className:"friends__container",children:[Object(j.jsx)("h2",{className:"friends__title",children:"Friends"}),Object(j.jsxs)("div",{className:"friends__box",children:[Object(j.jsx)(Ie,{}),Object(j.jsx)(Be,{})]})]})}),Le=function(){function e(){Object(G.a)(this,e)}return Object(K.a)(e,null,[{key:"delete",value:function(){var e=Object(I.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te.post("/delete",{userId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"registration",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r,n,s,a,c){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te.post("/registration",{username:t,email:r,password:n,firstName:s,lastName:a,role:c}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,s,a,c){return e.apply(this,arguments)}}()},{key:"edit",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({},r),e.abrupt("return",te.patch("/editInfo",{userId:t,userInfo:Object(ke.a)({},n)}));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te.patch("/changePassword",{userId:t,newPassword:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"changeAvatar",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te.post("/avatar",{userId:t,avatarUrl:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=Object(I.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te.post("/upload",t,{headers:{"content-type":"multipart/form-data"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Me=(r(133),function(e){var t=e.currentUser,r=e.getUsers,n=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.delete(t._id);case 2:return e.next=4,r();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)(L.a,{variant:"contained",sx:{margin:"0rem 1rem",width:"fit-content",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:n,children:"Delete User"})}),Re=(r(203),function(e){var t=e.currentUser,r=e.getUsers,s=Object(n.useState)(null),a=Object(B.a)(s,2),c=a[0],i=a[1],o=Object(n.useState)(),l=Object(B.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)(),h=Object(B.a)(b,2),f=h[0],m=h[1],x=Object(n.useState)(),p=Object(B.a)(x,2),O=p[0],_=p[1],v=Object(n.useState)(),g=Object(B.a)(v,2),k=g[0],N=g[1],w=Object(n.useState)(),C=Object(B.a)(w,2),y=C[0],U=C[1],S=Object(n.useState)(),D=Object(B.a)(S,2),E=D[0],P=D[1],M=Object(n.useState)(),R=Object(B.a)(M,2),z=R[0],q=R[1],T=Object(n.useState)(),Y=Object(B.a)(T,2),H=Y[0],Q=Y[1],W=Object(n.useState)(),J=Object(B.a)(W,2),V=J[0],G=J[1],K=Object(n.useState)(),X=Object(B.a)(K,2),Z=X[0],$=X[1],ee=Object(n.useState)(),te=Object(B.a)(ee,2),re=te[0],ne=te[1],se=Object(n.useState)("member"),ae=Object(B.a)(se,2),ce=ae[0],ie=ae[1],oe={margin:"0 0 1rem 0",":after":{borderBottom:"2px solid #534ED9"}},le=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.edit(t._id,{firstName:u,lastName:f,city:k,birthday:O,stack:y,position:E,department:z,education:H,skype:V,phone:Z,role:ce,description:re});case 2:return 200===e.sent.status&&(i("Success"),setTimeout((function(){return i(null)}),2e3)),e.next=6,r();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("form",{className:"editUser__form",children:[Object(j.jsx)("h3",{className:"editUser__form__title",children:"Edit User Data"}),Object(j.jsx)("h3",{className:"admin__success",children:c||null}),Object(j.jsxs)("div",{className:"editUser__data",children:[Object(j.jsxs)("div",{className:"editUser__mainData",children:[Object(j.jsx)("h4",{className:"editUser__title",children:"Edit personal info"}),Object(j.jsx)(F.a,{onChange:function(e){return d(e.target.value)},placeholder:"First Name",type:"text",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return m(e.target.value)},placeholder:"Last Name",type:"text",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return N(e.target.value)},placeholder:"City",type:"text",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return _(e.target.value)},placeholder:"Age",type:"date",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return $(+e.target.value)},placeholder:"Phone",type:"number",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return ie(e.target.value)},placeholder:"Role",type:"text",sx:oe})]}),Object(j.jsxs)("div",{className:"editUser__otherData",children:[Object(j.jsx)("h4",{className:"editUser__title",children:"Edit other info"}),Object(j.jsx)(F.a,{onChange:function(e){return U(e.target.value)},multiline:!0,placeholder:"Stack",type:"text",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return P(e.target.value)},placeholder:"Position",type:"text",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return q(e.target.value)},placeholder:"Department",type:"text",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return Q(e.target.value)},multiline:!0,placeholder:"Education",type:"text",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return G(e.target.value)},placeholder:"Skype",type:"text",sx:oe}),Object(j.jsx)(F.a,{onChange:function(e){return ne(e.target.value)},placeholder:"Description",type:"text",multiline:!0,sx:oe})]})]}),Object(j.jsxs)("div",{className:"editUser__btns",children:[Object(j.jsx)(L.a,{onClick:le,variant:"contained",sx:{margin:"0rem auto 0rem auto",width:"fit-content",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},children:"Save Changes"}),Object(j.jsx)(Me,{currentUser:t,getUsers:r})]})]})}),ze=(r(204),function(e){var t=e.currentUser;return Object(j.jsxs)("div",{className:"currentUser__box",children:[Object(j.jsx)("h3",{className:"currentUser__title",children:"Current User: "}),Object(j.jsxs)("ul",{className:"currentUser__data__ul",children:[Object(j.jsx)("li",{className:"currentUser__data__li",children:t.firstName&&t.lastName?"".concat(t.firstName," ").concat(t.lastName):null}),Object(j.jsx)("li",{className:"currentUser__data__li",children:t.email?"Email: ".concat(t.email):null}),Object(j.jsx)("li",{className:"currentUser__data__li",children:t.city?"City: ".concat(t.city):null}),Object(j.jsx)("li",{className:"currentUser__data__li",children:t.birthday?"Birthday: ".concat(t.birthday.split("-").reverse().join(".")):null}),Object(j.jsx)("li",{className:"currentUser__data__li",children:t.department?"Department: ".concat(t.department):null}),Object(j.jsx)("li",{className:"currentUser__data__li",children:t.skype?"Skype: ".concat(t.skype):null}),Object(j.jsx)("li",{className:"currentUser__data__li",children:t.education?"Education: ".concat(t.education):null}),Object(j.jsx)("li",{className:"currentUser__data__li",children:t.phone?"Phone: ".concat(t.phone):null}),Object(j.jsx)("li",{className:"currentUser__data__li",children:t.role?"Role: ".concat(t.role):null})]})]})}),qe=function(e){var t=e.users,r=e.setUser,a=Object(n.useContext)(Nt).store,c=Object(n.useState)(t),i=Object(B.a)(c,2),o=i[0],l=i[1],u=Object(n.useState)(a.user),b=Object(B.a)(u,2),h=b[0],f=b[1],m=Object(n.useState)(""),x=Object(B.a)(m,2),p=x[0],O=x[1];Object(n.useEffect)((function(){return l(t),function(){return l(null)}}),[t]);var _={width:"40px",height:"40px",margin:"0 .8rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"},v=null===o||void 0===o?void 0:o.filter((function(e){return(e.firstName+" "+e.lastName).toLowerCase().includes(p.toLowerCase())||e.email.toLowerCase().includes(p.toLowerCase())}));return Object(j.jsxs)("div",{className:"admin__users",children:[Object(j.jsx)(F.a,{placeholder:"Search by first name, last name, or email",type:"search",sx:{margin:"0 0 1rem 0",width:"330px",backgroundColor:"#fff",padding:".5rem",borderRadius:".3rem .3rem 0 0",":after":{borderBottom:"2px solid #534ED9"}},onChange:function(e){return O(e.target.value)}}),Object(j.jsx)(ze,{currentUser:h}),Object(j.jsx)("ul",{className:"admin__users__ul",children:null===v||void 0===v?void 0:v.map((function(e){return Object(j.jsxs)("li",{className:"admin__users__li",onClick:function(){r(e),f(e)},children:[Object(j.jsx)(s.b,{to:"/profile/".concat(e._id),children:Object(j.jsx)(d.a,{src:e.avatar,sx:_})}),Object(j.jsxs)("ul",{className:"admin__users__data__ul",children:[Object(j.jsx)("li",{className:"admin__users__data__li",children:e.firstName&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):null}),Object(j.jsx)("li",{className:"admin__users__data__li",children:e.email?"Email: ".concat(e.email):null}),Object(j.jsx)("li",{className:"admin__users__data__li",children:e.city?"City: ".concat(e.city):null}),Object(j.jsx)("li",{className:"admin__users__data__li",children:e.birthday?"Birthday: ".concat(e.birthday.split("-").reverse().join(".")):null})]})]},e._id)}))})]})},Te=(r(205),function(e){var t=e.currentUser,r=e.getUsers,s=Object(n.useState)(""),a=Object(B.a)(s,2),c=a[0],i=a[1],o=Object(n.useState)(null),l=Object(B.a)(o,2),u=l[0],d=l[1],b=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.changePassword(t._id,c);case 2:return 200===e.sent.status&&(d("Success"),setTimeout((function(){return d(null)}),2e3)),e.next=6,r();case 6:i("");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"changeUserPassword__container",children:Object(j.jsxs)("form",{className:"changeUserPassword__form",children:[Object(j.jsx)("h3",{className:"changeUserPassword__title",children:"Change User Password"}),Object(j.jsx)("h3",{className:"admin__success",children:u||null}),Object(j.jsx)("h4",{children:"Enter a new user password"}),Object(j.jsx)(F.a,{value:c,autoComplete:"on",placeholder:"New Password",required:!0,type:"password",sx:{margin:"1rem 0 2rem 0",width:"400px",":after":{borderBottom:"2px solid #534ED9"}},onChange:function(e){return i(e.target.value)}}),Object(j.jsx)(L.a,{disabled:""===c,variant:"contained",sx:{margin:"0 auto",width:"fit-content",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:b,children:"Change Password"})]})})}),Ye=(r(206),function(e){var t=e.currentUser,r=e.getUsers,s=Object(n.useState)(),a=Object(B.a)(s,2),c=a[0],i=a[1],o=Object(n.useState)(),l=Object(B.a)(o,2),u=l[0],b=l[1],h=Object(n.useState)(null),f=Object(B.a)(h,2),m=f[0],x=f[1],p=function(){var e=Object(I.a)(A.a.mark((function e(n){var s,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),(s=new FormData).append("image",u),e.next=5,Le.upload(s);case 5:return a=e.sent,e.next=8,Le.changeAvatar(t._id,a.data.path).then((function(e){200===e.status&&(x("Success"),setTimeout((function(){return x(null)}),2e3))}));case 8:return e.next=10,r();case 10:i(null),b(null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"changeUserAvatar__container",children:[Object(j.jsx)("h3",{className:"changeUserAvatar__title",children:"Change User Avatar"}),Object(j.jsx)("h3",{className:"admin__success",children:m||null}),Object(j.jsxs)("form",{className:"changeUserAvatar__form",encType:"multipart/form-data",children:[Object(j.jsx)(F.a,{sx:{":after":{borderBottom:"2px solid #534ED9"}},type:"file",onChange:function(e){!function(e){var t=new FileReader,r=e.target.files[0];r?(t.onloadend=function(){i(t.result)},t.readAsDataURL(r),b(r)):(i(null),b(null))}(e)}}),Object(j.jsx)(L.a,{disabled:!c,variant:"contained",sx:{backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:function(e){return p(e)},children:"Upload"})]}),Object(j.jsxs)("div",{className:"changeUserAvatar__avatar__preview",children:[Object(j.jsx)(d.a,{src:c,sx:{width:"200px",borderRadius:"0",height:"200px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}}),Object(j.jsx)(d.a,{src:c,sx:{width:"200px",height:"200px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}}),Object(j.jsx)(d.a,{src:c,sx:{width:"100px",height:"100px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}}),Object(j.jsx)(d.a,{src:c,sx:{width:"50px",height:"50px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}}),Object(j.jsx)(d.a,{src:c,sx:{width:"30px",height:"30px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}})]})]})}),He=(r(207),function(e){var t=e.getUsers,r=Object(n.useState)(null),s=Object(B.a)(r,2),a=s[0],c=s[1],i=Object(n.useState)(""),o=Object(B.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(""),b=Object(B.a)(d,2),h=b[0],f=b[1],m=Object(n.useState)(""),x=Object(B.a)(m,2),p=x[0],O=x[1],_=Object(n.useState)(""),v=Object(B.a)(_,2),g=v[0],k=v[1],N=Object(n.useState)(""),w=Object(B.a)(N,2),C=w[0],y=w[1],U=Object(n.useState)("member"),S=Object(B.a)(U,2),D=S[0],E=S[1],P={margin:"1.5rem 1.3rem 0.8rem 1.3rem",":after":{borderBottom:"2px solid #534ED9"}},M=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.registration(h,l,p,g,C,D);case 2:return 200===e.sent.status&&(c("Success"),setTimeout((function(){return c(null)}),2e3)),e.next=6,t();case 6:f(""),u(""),O(""),k(""),y(""),E("");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"admin__registration__box",children:[Object(j.jsx)("h3",{className:"admin__registration__title",children:"New User Registration"}),Object(j.jsx)("h3",{className:"admin__success",children:a||null}),Object(j.jsxs)("form",{className:"admin__registration__form",children:[Object(j.jsx)(F.a,{value:l,placeholder:"Email",type:"text",sx:P,onChange:function(e){u(e.target.value)}}),Object(j.jsx)(F.a,{value:h,placeholder:"Username",type:"text",sx:P,onChange:function(e){f(e.target.value)}}),Object(j.jsx)(F.a,{value:g,placeholder:"First Name",type:"text",sx:P,onChange:function(e){k(e.target.value)}}),Object(j.jsx)(F.a,{value:C,placeholder:"Last Name",type:"text",sx:P,onChange:function(e){y(e.target.value)}}),Object(j.jsx)(F.a,{value:p,autoComplete:"on",placeholder:"Password",type:"password",sx:P,onChange:function(e){O(e.target.value)}}),Object(j.jsxs)("div",{children:[Object(j.jsx)(Y.a,{inputProps:{"aria-label":"controlled"},onChange:function(e){!0===e.target.checked?E("admin"):E("member")}}),"Admin"]}),Object(j.jsx)(L.a,{disabled:""===h||""===l||""===p||""===g||""===C,variant:"contained",sx:{margin:"2rem 1.3rem 2rem 1.3rem",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:M,children:"Create User"})]})]})}),Qe=(r(208),function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)([]),r=Object(B.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(e.user),i=Object(B.a)(c,2),o=i[0],l=i[1],u=function(){var e=Object(I.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.fetchUsers();case 2:return t=e.sent,e.abrupt("return",a(t.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return u(),function(){return a(null)}}),[]);return Object(j.jsxs)("div",{className:"admin__box",children:[Object(j.jsx)(qe,{users:s,setUser:function(e){return l(e)}}),Object(j.jsxs)("div",{className:"admin__editUser",children:[o===e.user||o._id===e.user.id?null:Object(j.jsx)(Re,{currentUser:o,getUsers:u}),o===e.user||o._id===e.user.id?null:Object(j.jsx)(Te,{currentUser:o,getUsers:u}),o===e.user||o._id===e.user.id?null:Object(j.jsx)(Ye,{currentUser:o,getUsers:u})]}),Object(j.jsx)(He,{getUsers:u})]})}),We=function(e){var t=e.children,r=Object(o.g)();return localStorage.getItem("token")?t:Object(j.jsx)(o.a,{to:"/login",state:{from:r.pathname}})},Je=function(e){var t=e.children,r=Object(o.g)();return localStorage.getItem("token")?Object(j.jsx)(o.a,{to:"/board",state:{from:r.pathname}}):t},Ve=function(){return Object(j.jsxs)("div",{className:"not__found",children:[Object(j.jsx)("span",{children:"404"}),Object(j.jsx)("span",{children:"Not Found"})]})},Ge=function(e){var t=e.children;return Object(n.useContext)(Nt).store.isAdmin?t:Object(j.jsx)(Ve,{})},Ke=r(264),Xe=r(265),Ze=(r(209),function(e){var t=e.users,r=e.getUsersWithQuery,s=e.getUsersWithoutQuery,a=Object(n.useState)(""),c=Object(B.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)(""),u=Object(B.a)(l,2),d=u[0],b=u[1],h=Object(n.useState)(),f=Object(B.a)(h,2),m=f[0],x=f[1],p=Object(n.useState)(),O=Object(B.a)(p,2),_=O[0],v=O[1],g=Object(n.useState)(),k=Object(B.a)(g,2),N=k[0],w=k[1],C={city:i,department:m,position:_,stack:N};""===C.city&&(C={city:null,department:m,position:_,stack:N});var y={margin:"0 0 1rem 0",width:"200px","& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"#534ED9"}},"& label.Mui-focused":{color:"#534ED9"}},U={margin:"1rem 0 0 0",width:"100%",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},S=[];null===t||void 0===t||t.map((function(e){return S.push(e.city)}));var D=Array.from(new Set(S));return Object(j.jsxs)("form",{className:"filter__form",children:[Object(j.jsx)(Ke.a,{value:d,inputValue:i,onInputChange:function(e,t){o(t)},onChange:function(e,t){b(t)},id:"controllable-states-demo",options:D.map((function(e){return e})),sx:y,renderInput:function(e){return Object(j.jsx)(Xe.a,Object(ke.a)(Object(ke.a)({},e),{},{label:"City"}))}}),Object(j.jsx)(Xe.a,{label:"Department",sx:y,onChange:function(e){return x(e.target.value)}}),Object(j.jsx)(Xe.a,{label:"Position",sx:y,onChange:function(e){return v(e.target.value)}}),Object(j.jsx)(Xe.a,{label:"Stack",sx:y,onChange:function(e){return w(e.target.value)}}),Object(j.jsx)(L.a,{variant:"contained",sx:U,onClick:function(){o(""),b(""),x(null),v(null),w(null),s()},children:"Clear"}),Object(j.jsx)(L.a,{variant:"contained",sx:U,onClick:function(){return r(C)},children:"Confirm"})]})}),$e=(r(134),function(e){var t=e.filteredUsers,r={width:"100px",height:"100px",margin:"0 .8rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"};return Object(j.jsx)("ul",{className:"users__ul",children:t?t.map((function(e){return Object(j.jsxs)("li",{className:"users__li",children:[Object(j.jsx)(s.b,{to:"/profile/".concat(e._id),children:Object(j.jsx)(d.a,{src:e.avatar,sx:r})}),Object(j.jsxs)("ul",{className:"users__data__ul",children:[Object(j.jsx)("li",{className:"users__data__li",children:e.firstName&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):null}),Object(j.jsx)("li",{className:"users__data__li",children:e.email?"Email: ".concat(e.email):null}),Object(j.jsx)("li",{className:"users__data__li",children:e.city?"City: ".concat(e.city):null}),Object(j.jsx)("li",{className:"users__data__li",children:e.birthday?"Birthday: ".concat(e.birthday.split("-").reverse().join(".")):null})]})]},e._id)})):null})}),et=function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)([]),r=Object(B.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(""),i=Object(B.a)(c,2),o=i[0],l=i[1],u=Object(n.useState)(0),d=Object(B.a)(u,2),b=d[0],h=d[1],f=Object(n.useState)(10),m=Object(B.a)(f,2),x=m[0],p=m[1],O=function(){var t=Object(I.a)(A.a.mark((function t(r){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAllUsers(r,x);case 2:return a(e.allUsers),t.abrupt("return",(function(){return a(null)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAllUsers("",x);case 2:return a(e.allUsers),t.abrupt("return",(function(){return a(null)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){return e.getAllUsers("",x).then((function(){a(e.allUsers),h(+e.usersLength)})),function(){return a(null)}}),[e,x]);var v=null===s||void 0===s?void 0:s.filter((function(e){return(e.firstName+" "+e.lastName).toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())}));return Object(j.jsxs)("div",{className:"users__container",children:[Object(j.jsx)("h2",{className:"users__title",children:"All Users"}),Object(j.jsx)(F.a,{placeholder:"Search by first name, last name, or email",type:"search",sx:{margin:"0 0 2rem 0",width:"fit-content",backgroundColor:"#fff",padding:".5rem",borderRadius:".3rem .3rem 0 0",":after":{borderBottom:"2px solid #534ED9"}},onChange:function(e){return l(e.target.value)}}),Object(j.jsxs)("div",{className:"users__box",children:[Object(j.jsx)($e,{filteredUsers:v}),Object(j.jsx)("div",{className:"users__filter",children:Object(j.jsx)(Ze,{users:s,getUsersWithQuery:O,getUsersWithoutQuery:_})})]}),(null===s||void 0===s?void 0:s.length)>=b?null:Object(j.jsx)(De,{fetchMore:function(){return p(x+10)}})]})},tt=function(){return Object(j.jsx)(et,{})},rt=(r(109),function(e){var t=e.img;return Object(j.jsxs)("div",{className:"upload__avatar__preview",children:[Object(j.jsx)(d.a,{src:t,sx:{width:"200px",borderRadius:"0",height:"200px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}}),Object(j.jsx)(d.a,{src:t,sx:{width:"200px",height:"200px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}}),Object(j.jsx)(d.a,{src:t,sx:{width:"100px",height:"100px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}}),Object(j.jsx)(d.a,{src:t,sx:{width:"50px",height:"50px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}}),Object(j.jsx)(d.a,{src:t,sx:{width:"30px",height:"30px",margin:"0 1rem 0 0",backgroundColor:"#534ED9",fontSize:"50px"}})]})}),nt=function(e){var t=e.imageChange,r=e.imageUpload;return Object(j.jsxs)("form",{className:"upload__form",children:[Object(j.jsx)(F.a,{sx:{":after":{borderBottom:"2px solid #534ED9"}},type:"file",onChange:function(e){t(e)}}),Object(j.jsx)(L.a,{variant:"contained",sx:{backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}},onClick:function(e){return r(e)},children:"Upload"})]})},st=function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)(),r=Object(B.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(),i=Object(B.a)(c,2),o=i[0],l=i[1],u=function(){var t=Object(I.a)(A.a.mark((function t(r){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),(n=new FormData).append("image",o),t.next=5,re.post("/avatar",n,{headers:{"content-type":"multipart/form-data"}});case 5:e.checkAuth();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=s;return d=s?Object(j.jsx)("img",{src:s,alt:"img",className:"avatar__preview"}):null,Object(j.jsxs)("div",{className:"upload__container",children:[Object(j.jsx)("h2",{className:"upload__title",children:"Change Avatar"}),Object(j.jsx)(nt,{imageChange:function(e){var t=new FileReader,r=e.target.files[0];r?(t.onloadend=function(){a(t.result)},t.readAsDataURL(r),l(r)):(a(null),l(null))},imageUpload:u}),Object(j.jsx)(rt,{img:s}),Object(j.jsx)("div",{className:"upload__view",children:d})]})},at=function(){return Object(j.jsx)(st,{})},ct=r(23),it=r(142),ot=function e(){Object(G.a)(this,e)};ot.message=function(e,t,r){return re.post("/messenger/message",{conversationId:e,sender:t,text:r})},ot.getMessages=function(e){return re.get("/messenger/message/".concat(e))};r(215);var lt=function(e){var t=e.conversation,r=Object(n.useContext)(Nt).store,s={width:"40px",height:"40px",margin:"0 .5rem 0 0",backgroundColor:"#534ED9"};return t[1]._id!==r.user.id?Object(j.jsx)("div",{className:"conversation",children:Object(j.jsxs)("div",{className:"conversation__users",children:[Object(j.jsx)(d.a,{src:t[1].avatar,sx:s}),t[1].firstName," ",t[1].lastName]},t[1].email)}):Object(j.jsx)("div",{className:"conversation",children:Object(j.jsxs)("div",{className:"conversation__users",children:[Object(j.jsx)(d.a,{src:t[0].avatar,sx:s}),t[0].firstName," ",t[0].lastName]},t[0].email)})},ut=(r(216),function(e){var t=e.message,r=e.own;return Object(j.jsxs)("div",{className:r?"message__content own":"message__content",children:[Object(j.jsx)(s.b,{to:"/profile/".concat(t.sender._id),children:Object(j.jsx)(d.a,{src:t.sender.avatar,sx:{width:"40px",height:"40px",margin:"0 .5rem 0 0",backgroundColor:"#534ED9"}})}),Object(j.jsxs)("span",{className:"message__text",children:[Object(j.jsxs)("div",{className:"message__text__info",children:[Object(j.jsx)("span",{children:t.sender.firstName}),Object(j.jsx)(je.a,{className:"time",format:"HH:mm",children:t.date})]}),Object(j.jsx)("span",{children:t.text})]})]})}),dt=(r(217),function(){var e=Object(n.useContext)(Nt).store,t=Object(n.useState)(!1),r=Object(B.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)([]),i=Object(B.a)(c,2),o=i[0],l=i[1],u=Object(n.useState)(""),d=Object(B.a)(u,2),b=d[0],h=d[1],f=Object(n.useState)(e.user),m=Object(B.a)(f,2),x=m[0],p=m[1],O=Object(n.useState)(null),_=Object(B.a)(O,2),v=_[0],g=_[1],k=Object(n.useState)(null),N=Object(B.a)(k,2),w=N[0],C=N[1],y=Object(n.useState)([]),U=Object(B.a)(y,2),S=U[0],D=U[1],E=Object(n.useRef)(),P=Object(n.useRef)(null);Object(n.useEffect)((function(){P.current=Object(it.a)("ws://localhost:3020"),P.current.on("getMessage",(function(e){C({sender:e.sender,text:e.text})}))}),[]),Object(n.useEffect)((function(){w&&(null===v||void 0===v?void 0:v.members.includes(w.sender))&&D((function(e){return[].concat(Object(ct.a)(e),[w])}))}),[w,v]),Object(n.useEffect)((function(){P.current.emit("addUser",e.user.id)}),[e.user.id,v]),Object(n.useEffect)((function(){return Ce.getConversation(e.user.id).then((function(e){return l(e.data)})),function(){return l(null)}}),[e.user.id]),Object(n.useEffect)((function(){var e;null===(e=E.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[S,w,b]),Object(n.useEffect)((function(){var t=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,ot.getMessages(v._id).then((function(e){D(e.data)}));case 3:return e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(t(),x.messagesFromFriend){var r=x.friends.find((function(t){return t===e.user.id}));a(r===e.user.id)}x.messagesFromFriend||a(!0)}),[v,x.friends,e.user.id,x.messagesFromFriend,w]);var M=function(){var t=Object(I.a)(A.a.mark((function t(){var r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot.message(v._id,e.user.id,b);case 2:return r=t.sent,t.next=5,P.current.emit("sendMessage",{sender:e.user,receiverId:x._id,text:b});case 5:D([].concat(Object(ct.a)(S),[r.data])),h("");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=Object(I.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ce.delete(v._id);case 2:return t.next=4,Ce.getConversation(e.user.id).then((function(e){return l(e.data)}));case 4:g(null);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z={margin:"0 1rem 0 0",fontSize:".7rem",backgroundColor:"#534ED9",":hover":{backgroundColor:"#7673D9"}};return Object(j.jsxs)("div",{className:"messenger__box",children:[Object(j.jsx)("div",{className:"messenger__conversations",children:o?o.map((function(t){return Object(j.jsx)("div",{onClick:function(){g(t),p(t.members.find((function(t){return t._id!==e.user.id})))},children:Object(j.jsx)(lt,{conversation:t.members})},t._id)})):Object(j.jsx)("div",{className:"messenger__conversations"})}),Object(j.jsx)("div",{className:"messenger__chat__column",children:v?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"messenger__chat__user",children:[Object(j.jsxs)("h3",{children:[x.firstName," ",x.lastName]}),Object(j.jsx)(L.a,{sx:z,variant:"contained",onClick:R,children:"Delete Dialog"})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"messenger__chat",children:S?S.map((function(t){return Object(j.jsx)("div",{ref:E,children:Object(j.jsx)(ut,{message:t,own:t.sender._id===e.user.id})},t._id)})):null}),Object(j.jsx)("hr",{}),Object(j.jsxs)("form",{className:"messenger__form",children:[s?Object(j.jsx)(F.a,{value:b,type:"text",placeholder:"Message",multiline:!0,sx:{margin:"1rem 1rem",width:"80%",":after":{borderBottom:"2px solid #534ED9"}},onChange:function(e){return h(e.target.value)}}):Object(j.jsx)("div",{className:"messenger__private",children:"Only friends can send messages to this user"}),""!==b?Object(j.jsx)(L.a,{variant:"contained",sx:z,onClick:M,children:"Send"}):Object(j.jsx)(L.a,{disabled:!0,variant:"contained",sx:z,onClick:M,children:"Send"})]})]}):Object(j.jsx)("div",{className:"messenger__choose__chat",children:"Choose Dialog"})})]})}),jt=(r(218),function(){return Object(j.jsxs)("div",{className:"messengerPage__container",children:[Object(j.jsx)("h2",{className:"messengerPage__title",children:"Messages"}),Object(j.jsx)(dt,{})]})}),bt=function(){return Object(j.jsx)(o.e,{children:Object(j.jsxs)(o.c,{path:"/",element:Object(j.jsx)(E,{}),children:[Object(j.jsx)(o.c,{path:"users",element:Object(j.jsx)(We,{children:Object(j.jsx)(tt,{})})}),Object(j.jsx)(o.c,{path:"friends/:userId",element:Object(j.jsx)(We,{children:Object(j.jsx)(Fe,{})})}),Object(j.jsx)(o.c,{path:"/profile/:userId",element:Object(j.jsx)(We,{children:Object(j.jsx)(Se,{})})}),Object(j.jsx)(o.c,{path:"/login",element:Object(j.jsx)(Je,{children:Object(j.jsx)(z,{})})}),Object(j.jsx)(o.c,{path:"registration",element:Object(j.jsx)(Je,{children:Object(j.jsx)(T,{})})}),Object(j.jsx)(o.c,{path:"settings",element:Object(j.jsx)(We,{children:Object(j.jsx)(W,{})})}),Object(j.jsx)(o.c,{path:"settings/password",element:Object(j.jsx)(We,{children:Object(j.jsx)(V,{})})}),Object(j.jsx)(o.c,{path:"board",element:Object(j.jsx)(We,{children:Object(j.jsx)(Pe,{})})}),Object(j.jsx)(o.c,{path:"chat",element:Object(j.jsx)(We,{children:Object(j.jsx)(jt,{})})}),Object(j.jsx)(o.c,{path:"settings/avatar",element:Object(j.jsx)(We,{children:Object(j.jsx)(at,{})})}),Object(j.jsx)(o.c,{path:"/admin",element:Object(j.jsx)(Ge,{children:Object(j.jsx)(Qe,{})})}),Object(j.jsx)(o.c,{path:"/",element:Object(j.jsx)(We,{children:Object(j.jsx)(Pe,{})})})]})})},ht=(r(219),Object(i.a)((function(){var e=Object(n.useContext)(Nt).store;return Object(n.useEffect)((function(){localStorage.getItem("token")&&e.checkAuth()}),[e]),e.isLoading?Object(j.jsx)("div",{className:"main__box",children:Object(j.jsx)(S,{})}):Object(j.jsx)("div",{className:"main__box",children:Object(j.jsx)(bt,{})})}))),ft=r(24),mt=function(){function e(){Object(G.a)(this,e)}return Object(K.a)(e,null,[{key:"login",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/login",{username:t,password:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),xt=function(){function e(){Object(G.a)(this,e)}return Object(K.a)(e,null,[{key:"registration",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r,n,s,a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/registration",{email:t,username:r,password:n,firstName:s,lastName:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,s,a){return e.apply(this,arguments)}}()}]),e}(),pt=function(){function e(){Object(G.a)(this,e)}return Object(K.a)(e,null,[{key:"logout",value:function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.clear(),e.abrupt("return",re.post("/logout"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ot=function(){function e(){Object(G.a)(this,e)}return Object(K.a)(e,null,[{key:"delete",value:function(){var e=Object(I.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.post("/delete",{userId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_t=function(){function e(){Object(G.a)(this,e)}return Object(K.a)(e,null,[{key:"edit",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({},r.userInfo),e.abrupt("return",re.patch("/editInfo",{userId:t,userInfo:Object(ke.a)({},n)}));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),vt=function(){function e(){Object(G.a)(this,e)}return Object(K.a)(e,null,[{key:"change",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.patch("/changePassword",{userId:t,newPassword:r,oldPassword:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),gt=function(){function e(){Object(G.a)(this,e),this.user={},this.otherUser={},this.allUsers={},this.usersLength="",this.isAuth=!1,this.isAdmin=!1,this.isLoading=!1,this.error=void 0,this.successMessage=void 0,Object(ft.d)(this)}return Object(K.a)(e,[{key:"setAuth",value:function(e){this.isAuth=e}},{key:"setAdmin",value:function(e){this.isAdmin=e}},{key:"setUser",value:function(e){this.user=e}},{key:"setOtherUser",value:function(e){this.otherUser=e}},{key:"setAllUsers",value:function(e){this.allUsers=e}},{key:"setUsersLength",value:function(e){this.usersLength=e}},{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setError",value:function(e){this.error=e}},{key:"setSuccessMessage",value:function(e){this.successMessage=e}},{key:"getOtherUser",value:function(){var e=Object(I.a)(A.a.mark((function e(t){var r=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne.getUserInfo(t).then((function(e){r.setOtherUser(e.data.user)})).catch((function(e){console.log(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){var n=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt.login(t,r).then((function(e){localStorage.setItem("token",e.data.accessToken),n.setAuth(!0),n.setUser(e.data.user),"admin"===e.data.user.role&&(localStorage.setItem("role",e.data.user.role),n.setAdmin(!0))})).catch((function(e){n.setError(e.response.data.message),setTimeout((function(){return n.setError(null)}),2500)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.removeItem("token"),localStorage.removeItem("role"),e.next=5,Ot.delete(this.user.id);case 5:this.setAuth(!1),this.setUser({}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"editProfile",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){var n,s=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({},r),e.prev=1,e.next=4,_t.edit(t,{userInfo:Object(ke.a)({},n)});case 4:this.setSuccessMessage("Successfully changed"),setTimeout((function(){return s.setSuccessMessage(null)}),3500),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"changePass",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r,n){var s=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vt.change(t,r,n).catch((function(e){s.setError(e.response.data.message),setTimeout((function(){return s.setError(null)}),3500)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"registration",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r,n,s,a){var c=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xt.registration(t,r,n,s,a).then((function(e){localStorage.setItem("token",e.data.accessToken),c.setAuth(!0),c.setUser(e.data.user),"admin"===e.data.user.role&&(localStorage.setItem("role",e.data.user.role),c.setAdmin(!0))})).catch((function(e){c.setError(e.response.data.message),setTimeout((function(){return c.setError(null)}),2500)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r,n,s,a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pt.logout();case 3:localStorage.removeItem("token"),this.setAuth(!1),this.setLoading(!0),this.setUser({}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.prev=12,this.setLoading(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"checkAuth",value:function(){var e=Object(I.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoading(!0),e.prev=1,e.next=4,Z.a.get("".concat($,"/refresh"),{withCredentials:!0});case 4:t=e.sent,localStorage.setItem("token",t.data.accessToken),this.setAuth(!0),this.setUser(t.data.user),"admin"===t.data.user.role&&(localStorage.setItem("role",t.data.user.role),this.setAdmin(!0)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),localStorage.clear(),console.log(e.t0);case 15:return e.prev=15,this.setLoading(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,11,15,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAllUsers",value:function(){var e=Object(I.a)(A.a.mark((function e(t,r){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne.fetchUsers(t,r);case 3:n=e.sent,this.setAllUsers(n.data.users),this.setUsersLength(n.data.length),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),kt=(r(220),new gt),Nt=Object(n.createContext)({store:kt});c.a.render(Object(j.jsx)(Nt.Provider,{value:{store:kt},children:Object(j.jsx)(s.a,{children:Object(j.jsx)(ht,{})})}),document.getElementById("root"))},73:function(e,t,r){}},[[221,1,2]]]);
//# sourceMappingURL=main.436bdbf1.chunk.js.map